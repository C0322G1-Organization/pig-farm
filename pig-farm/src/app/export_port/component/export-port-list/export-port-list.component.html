<div class="body">
  <div class="vc_empty_space" style="height: 64px"><span class="vc_empty_space_inner"></span></div>
  <div class="container container-list mt-5 pb-2">
    <div style="text-align: center; font-size: 30px;" class="mt-3">
      <h2>Quản Lý Chuồng Xuất</h2>
    </div>

    <div class="row">
      <div class="col-sm-12 col-lg-2 d-grid gap-2 d-md-flex">
        <button class="btn btn-outline-success background-btn-add mt-4" [routerLink]="['/export/create']">Thêm mới
          <i class="fa-solid fa-plus"></i></button>
      </div>
      <div class="col-sm-12 mt-3 col-lg-10 d-flex justify-content-end">
        <form class="d-flex justify-content-end" [formGroup]="searchForm" (ngSubmit)="searchAds()">
          <div class="col-sm-3 pe-2">
            <input class="form-control bg-transparent py-2 w-100" type="search"
                   name="codeExport" formControlName="codeExport"
                   placeholder="Tìm kiếm mã chuồng">
          </div>
          <div class="col-sm-3 pe-2">
            <input class="form-control bg-transparent py-2 w-100" type="search"
                   name="companySearch" formControlName="companySearch"
                   placeholder="Tìm kiếm công ty">
          </div>
          <div class="col-sm-3 pe-2">
            <input class="form-control bg-transparent py-2 w-100" type="search"
                   name="employeeSearch" formControlName="employeeSearch"
                   placeholder="Tìm kiếm nhân viên">
          </div>
          <div class="col-sm-2 mt-1 justify-content-md-around">
            <button class="btn btn-outline-success" (keyup.enter)="searchAds()">Tìm kiếm</button>
          </div>
        </form>
      </div>
    </div>
    <form #deleteForm="ngForm" (ngSubmit)="checkDelete(deleteForm.value)">
      <div style="overflow-x:auto; min-height: 261px"
           *ngIf="listExport && listExport.length> 0; else elseBlock">
        <table style="border-radius: 20px"
               class="table table-striped table-hover mt-3 mb-3 col-sm-12">
          <thead>
          <tr style="background-color: #017428">
            <th class="text-light" style="width: 2%">STT</th>
            <th class="text-light" style="width: 10%">Mã Chuồng Xuất</th>
            <th class="text-light" style="width: 9%">Mã Nhân Viên</th>
            <th class="text-light" style="width: 11%">Tên Nhân Viên</th>
            <th class="text-light" style="width: 13%">Đơn Vị</th>
            <th class="text-light" style="width: 10%">Ngày Xuất</th>
            <th class="text-light" style="width: 10%">Số Lượng(Con)</th>
            <th class="text-light" style="width: 8%">Số Lượng(Kg)</th>
            <th class="text-light" style="width: 7%">Loại Lợn</th>
            <th class="text-light" style="width: 10%">Đơn Giá(VND)</th>
            <th class="text-light" style="width: 10%">Tổng Tiền(VND)</th>
            <th></th>
          </tr>
          </thead>
          <tbody *ngFor="let item of listExport, index as i">
          <tr>
            <td>{{(i + 1) + 5 * number}}</td>
            <td>{{item.codeExport}}</td>
            <td>{{item.codeEmployee}}</td>
            <td>{{item.nameEmployee}}</td>
            <td>{{item.company}}</td>
            <td>{{item.saleDate | date: 'dd/MM/yyyy'}}</td>
            <td>{{item.amount}}</td>
            <td>{{item.kilogram}}</td>
            <td>
              <span *ngIf="item.typePigs == 0">Lợn thịt</span>
              <span *ngIf="item.typePigs == 1 ">Lợn giống</span>
            </td>
            <td>{{item.price | currency :' ' :true: '1.0-3'}}</td>
            <td>{{item.price | currency :' ' :true: '1.0-3'}}</td>
            <td>
              <input *ngIf="item" type="checkbox" class="form-check-input" ngModel [name]="''+ item.id"
                     (ngModelChange)="checkButton(item.id)">
            </td>
          </tr>
          </tbody>
        </table>
      </div>

      <div style="background: white;opacity: 90%;height: 50px;position: relative;border-radius: 0 0 10px 10px"
           class="container">
        <div style="text-align: center; display: flex; justify-content: center">

          <button class="col-3 btn btn-outline-warning" style="width: auto; margin-right: 5%"
                  [routerLink]="['/export/update', editId]"
                  [disabled]="check.length != 1">
            Chỉnh Sửa
          </button>

          <button class="col-3 btn btn-outline-danger" style="width: auto;" data-bs-toggle="modal"
                  data-bs-target="#exampleModal" type="submit" [disabled]="check.length < 1">
            Xóa
          </button>
        </div>
      </div>
      <!--Phan trang-->
      <div style="height: 50px;position: relative" class="container pagination-storage">
        <nav style="position: absolute;top:0px;right:20px" aria-label="..." *ngIf="listExport.length!=0">
          <ul class="pagination justify-content-end">
            <li class="page-item" *ngIf="checkPreview">
              <a class="page-link" (click)="goPrevious()" tabindex="-1">Trước</a>
            </li>
            <li class="page-item" *ngIf="checkPreview"><a class="page-link" (click)="goPrevious()">{{number}}</a></li>
            <li class="page-item active">
              <a class="page-link" href="#"> <span class="sr-only">{{number + 1}}</span></a>
            </li>
            <li class="page-item" *ngIf="checkNext"><a class="page-link" (click)="goNext()">{{number + 2}}</a></li>
            <li class="page-item" *ngIf="checkNext">
              <a class="page-link" (click)="goNext()">Tiếp theo </a>
            </li>
          </ul>
        </nav>
      </div>
    </form>

  </div>

  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Chú ý!</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>Bạn có muốn xóa các chuồng lợn đã xuất sau:</p>
          <ul *ngFor="let name of nameDelete, index as i">
            {{i + 1}} {{name}}
          </ul>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="resetId()">
            Hủy
          </button>
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal" (click)="deleteId()">
            Xóa
          </button>
        </div>
      </div>
    </div>
  </div>
  <div style="text-align: center; display: flex; justify-content: center">
    <ng-template #elseBlock>
      <div style="color: red;" class="col-12 mt-4">
        <h2 style="text-align: center">Không có dữ liệu !!!</h2>
      </div>
    </ng-template>
  </div>
  <div class="vc_empty_space" style="height: 64px"><span class="vc_empty_space_inner"></span></div>
</div>
