<div class="body">
  <div class="container mt-5 pb-2"  *ngIf="contact && contact.length > 0">
    <div style="text-align: center; font-size: 30px;" class="mt-3">Danh Sách Liên Hệ</div>
    <form [formGroup]="searchForm" novalidate (ngSubmit)="search()">
      <div class="row mt-5">
        <div class="col-12">
          <div class="row">
            <div class="col-3 mx-auto me-0" style="display: flex; width: 450px">
              <input type="search" class="input-search form-control" style="width: 450px"
                     placeholder="Tìm kiếm theo tên hoặc nội dung" formControlName="name"
                     id="name" (keyup.enter)="search()">
              <button class="btn btn-outline-success" type="submit" style="width: 130px">Tìm kiếm</button>
            </div>
          </div>
        </div>
      </div>
    </form>
    <form #deleteForm="ngForm" (ngSubmit)="checkDelete(deleteForm.value)">
      <div style="color: red" *ngIf="msg" [ngClass]="clss">{{msg}}</div>
      <table style="border-radius: 20px " class="table table-striped table-hover mt-3 mb-3">
        <thead>
        <tr style="background-color: #017428">
          <th class="text-light">STT</th>
          <th class="text-light">Tên người liên hệ</th>
          <th class="text-light">Nội dung</th>
          <th class="text-light">Địa chỉ</th>
          <th class="text-light">Ngày liên hệ</th>
          <th class="text-light">Chức năng</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let contact of contact; let i=index">
          <td>{{ (i + 1) + number * 5}}</td>
          <td>{{contact.name}}</td>
          <td>{{(contact.content.length > 100) ? (contact.content| slice:0:10) + '...' : (contact.content)}}</td>
          <td>{{contact.address}}</td>
          <td>{{contact.date | date: "dd/MM/yyyy"}}</td>
          <td>
            <input *ngIf="contact" type="checkbox" ngModel [name]="''+contact.id"
                   (ngModelChange)="checkButton(contact.id)">
          </td>
        </tr>
        </tbody>
      </table>

      <div style="text-align: center; display: flex; justify-content: center">
        <button class="col-3 btn btn-outline-success" style="width: auto; margin-right: 5%" data-bs-toggle="modal"
                data-bs-target="#staticBackdrop" type="submit" [disabled]="check.length!=1" (click)="getDetails()">
          Xem chi tiết
        </button>
        <button class="col-3 btn btn-outline-danger" style="width: auto;" data-bs-toggle="modal"
                data-bs-target="#exampleModal" type="submit" [disabled]="check.length<1">
          Xoá
        </button>
      </div>
    </form>
    <!--Phan trang-->
    <nav aria-label="..." class="pagination float-end">
      <ul class="pagination">
        <li class="page-item " *ngIf="checkPrevious">
          <a class="page-link" (click)="goPrevious()" tabindex="-1">Trang trước</a>
        </li>
        <li class="page-item" *ngIf="checkPrevious"><a class="page-link" (click)="goPrevious()">{{number}}</a></li>
        <li class="page-item active">
          <a class="page-link"> <span class="sr-only">{{number + 1}}</span></a>
        </li>
        <li class="page-item" *ngIf="checkNext"><a class="page-link" (click)="goNext()">{{number + 2}}</a></li>
        <li class="page-item" *ngIf="checkNext">
          <a class="page-link" (click)="goNext()">Trang sau</a>
        </li>
      </ul>
    </nav>
  </div>


  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Bạn có muốn xóa các mục sau</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <table>
            <tr *ngFor="let contact of nameDelete;let i = index ">
              <td>{{i + 1}}. {{contact| slice: 0:20}}....</td>
            </tr>
          </table>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-success" data-bs-dismiss="modal" (click)="resetDelete()">Huỷ
          </button>
          <button type="button" class="btn btn-outline-danger" (click)="deleteId()" data-bs-dismiss="modal">Xoá</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal Info -->
  <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
       aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="staticBackdropLabel">Thông tin chi tiết liên hệ</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form class="col-lg-6 formRow_create">
            <div class="formRow_create_content">
              <div class="mb-3">
                <label class="form-label">Tên người liên hệ: <span style="color: #5c636a">{{contactDetail.name}}</span></label>
              </div>

              <div class="mb-3">
                <label class="form-label">Email: <span style="color: #5c636a">{{contactDetail.email}}</span></label>
              </div>

              <div class="mb-3">
                <label class="form-label">Số điện thoại: <span
                  style="color: #5c636a">{{contactDetail.phone}}</span></label>
              </div>

              <div class="mb-3">
                <label class="form-label">Địa chỉ: <span style="color: #5c636a">{{contactDetail.address}}</span>
                </label>
              </div>

              <div class="mb-3">
                <label class="form-label">Nội dung: <span style="color: #5c636a">{{contactDetail.content}}</span>
                </label>
              </div>

              <div class="mb-3">
                <label class="form-label">Ngày liên hệ: <span style="color: #5c636a">{{contactDetail.date}}</span>
                </label>
              </div>

            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-success" data-bs-dismiss="modal">Đóng</button>
        </div>
      </div>
    </div>
  </div>
</div>
