<body>
<div class="container mt-5 pb-2" *ngIf="contact && contact.length > 0">
  <div style="text-align: center; font-size: 30px;" class="mt-3">Danh Sách Liên Hệ</div>
  <form [formGroup]="searchForm" novalidate (ngSubmit)="search()">
    <div class="row mt-5">
      <div class="col-12">
        <div class="row">
          <div class="col-3 mx-auto me-0" style="display: flex; width: 450px">
            <input type="search" class="input-search form-control" style="width: 450px"
                   placeholder="Tìm kiếm theo tên hoặc nội dung" formControlName="name"
                   id="name" (keyup.enter)="search()">
            <button class="btn btn-outline-success" type="submit" style="width: 130px">Tìm kiếm</button>
          </div>
        </div>
      </div>
    </div>
  </form>
  <form #deleteForm="ngForm" (ngSubmit)="checkDelete(deleteForm.value)">
    <div style="color: red" *ngIf="msg" [ngClass]="clss">{{msg}}</div>
    <table style="border-radius: 20px " class="table table-striped table-hover mt-3 mb-3">
      <thead>
      <tr style="background-color: #017428">
        <th class="text-light">STT</th>
        <th class="text-light">Tên người liên hệ</th>
        <th class="text-light">Nội dung</th>
        <th class="text-light">Địa chỉ</th>
        <th class="text-light">Ngày liên hệ</th>
        <th class="text-light">Chi tiết</th>
        <th class="text-light"></th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let contact of contact; let i=index">
        <td>{{ (i + 1) + number * 5}}</td>
        <td>{{contact.name}}</td>
        <td>{{contact.content}}</td>
        <td>{{contact.address}}</td>
        <td>{{contact.date | date: "dd/MM/yyyy"}}</td>
        <td>
          <!-- Button trigger modal -->
          <button type="button" class="btn btn-outline-success" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
            Xem chi tiết
          </button>
        </td>
        <td>
          <input *ngIf="contact" type="checkbox" ngModel [name]="''+contact.id">
        </td>
      </tr>
      </tbody>
    </table>
    <div style="text-align: center; display: flex; justify-content: center">
      <button class="col-3 btn btn-outline-danger" style="width: auto;" data-bs-toggle="modal"
              data-bs-target="#exampleModal" type="submit">
        Xoá
      </button>
    </div>
  </form>
  <!--Phan trang-->
  <div style="display: flex; justify-content: flex-end">
    <ul class="pagination">
      <div *ngIf="number == 0">
        <li class="page-item disabled">
          <button class="page-link" hidden>Previous</button>
        </li>
      </div>
      <div *ngIf="number != 0">
        <li class="page-item">
          <button class="page-link" (click)="goPrevious()">Previous</button>
        </li>
      </div>

      <div *ngFor="let count of countTotalPages; index as i">
        <div *ngIf="i == number">
          <li class="page-item active">
            <button class="page-link" (click)="goItem(i)">{{i + 1}}</button>
          </li>
        </div>
        <div *ngIf="i != number">
          <li class="page-item">
            <button class="page-link" (click)="goItem(i)">{{i + 1}}</button>
          </li>
        </div>
      </div>
      <div *ngIf="number == totalPages - 1">
        <li class="page-item disabled">
          <button class="page-link" hidden>Next</button>
        </li>
      </div>
      <div *ngIf="number != totalPages - 1">
        <li class="page-item">
          <button class="page-link" (click)="goNext()">Next</button>
        </li>
      </div>
    </ul>
  </div>
</div>


<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Bạn có muốn xóa các mục sau</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <table>
          <tr *ngFor="let contact of nameDelete;let i = index ">
            <td>{{i + 1}}. {{contact| slice: 0:20}}....</td>
          </tr>
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-success" data-bs-dismiss="modal" (click)="resetDelete()">Huỷ
        </button>
        <button type="button" class="btn btn-outline-danger" (click)="deleteId()" data-bs-dismiss="modal">Xoá</button>
      </div>
    </div>
  </div>
</div>
<!-- Modal Info -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
     aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Thông tin chi tiết liên hệ</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form class="col-lg-6 formRow_create">
          <div class="formRow_create_content">
            <div class="mb-3">
              <label class="form-label">Tên người liên hệ: <span style="color: #5c636a">{{contact}}</span></label>
            </div>

            <div class="mb-3">
              <label class="form-label">Email: <span style="color: #5c636a">nguyenvana@gmail.com</span></label>
            </div>

            <div class="mb-3">
              <label class="form-label">Số điện thoại: <span style="color: #5c636a">0993456789</span></label>
            </div>

            <div class="mb-3">
              <label class="form-label">Địa chỉ: <span style="color: #5c636a">Quảng Trị</span> </label>
            </div>

            <div class="mb-3">
              <label class="form-label">Nội dung: <span style="color: #5c636a">Cần mua 10 con lợn</span> </label>
            </div>

            <div class="mb-3">
              <label class="form-label">Ngày liên hệ: <span style="color: #5c636a">20/08/2022</span> </label>
            </div>

          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-success" data-bs-dismiss="modal">Đóng</button>
      </div>
    </div>
  </div>
</div>
</body>
