<div class="container">
  <div><h2 style="text-align: center; " class="mt-3">Danh Sách Cá Thể</h2></div>
  <div class="row pb-3 mt-5">
    <div class="col-sm-12 col-lg-2">
      <button class="btn btn-outline-success background-btn-add mt-4" [routerLink]="['/']">Thêm mới
        <i class="fa-solid fa-plus"></i></button>
    </div>
    <div class="col-sm-12 col-lg-10 d-flex justify-content-end">
      <form class="d-flex justify-content-end" [formGroup]="searchForm" (ngSubmit)="searchPig()" >
        <div class="col-sm-3 pe-2">
          <label>Mã cá thể</label>
          <input class=" form-control" placeholder="Mã cá thể" type="text" formControlName="codeSearch"
                 name="codeSearch">
        </div>
        <div class="col-sm-3  pe-2">
          <label>Ngày nhập chuồng</label>
          <input class=" form-control" placeholder="Ngày nhập chuồng" type="date" formControlName="dateInSearch"
                 name="dateInSearch">
        </div>
        <div class="col-sm-3 pe-2">
          <label>Tình trạng</label>
          <select class="form-select" formControlName="statusSearch">
            <option value="">Tình trạng</option>
            <option [value]="'Có bệnh'">Có bệnh</option>
            <option [value]="'Khoẻ mạnh'">Khoẻ mạnh</option>
          </select>
        </div>
        <div class="col-sm-2">
          <button class="btn btn-outline-success mt-4">Tìm kiếm</button>
        </div>
      </form>
    </div>
  </div>

  <form #deleteForm="ngForm" (ngSubmit)="checkDelete(deleteForm.value) "
        *ngIf="pigs && pigs.length > 0; else elseBlock">
    <!--        <div style="color: red" *ngIf="msg" [ngClass]="clss">{{msg}}</div>-->
    <table style="text-align: center;border-radius: 20px " class="table table-striped table-hover mt-3 mb-3">
      <thead>
      <tr class="bg-success">
        <th>STT</th>
        <th>Mã cá thể</th>
        <th>Mã chuồng nuôi</th>
        <th>Ngày nhập chuồng</th>
        <th>Ngày xuất chuồng</th>
        <th>Tình trạng</th>
        <th>Cân nặng (kg)</th>
        <th>Action</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let item of pigs, let i=index ">
        <td> {{ (i + 1) + number * 5}}</td>
        <td>{{item.code}}</td>
        <td>{{item.pigstyCode}}</td>
        <td>{{item.dateIn}}</td>
        <td>{{item.dateOut}}</td>
        <td>{{item.status}}</td>
        <td>{{item.weight}}</td>
        <td><input *ngIf="item" type="checkbox" ngModel [name]="''+item.id"></td>
      </tr>
      </tbody>
      <div>
      </div>
    </table>
    <div style="text-align: center; display: flex; justify-content: center">
      <button class="col-3 btn btn-outline-warning" style="width: auto; margin-right: 5%; margin-top: 2%;"><a
        href="edit.html" style="color: orange; text-decoration: none">
        Sửa
      </a></button>
      <button class="col-3 btn btn-outline-danger" style="width: auto; margin-top: 2%" data-bs-toggle="modal"
              data-bs-target="#exampleModal">
        Xoá
      </button>
    </div>
  </form>
<!--  <div class="paging">-->
<!--    <ul class="pagination justify-content-end">-->
<!--      <li class="page-item" *ngIf="checkPreview">-->
<!--        <a class="page-link" (click)="goPrevious()" tabindex="-1">Trang trước</a>-->
<!--      </li>-->
<!--      <li class="page-item" *ngIf="checkPreview"><a class="page-link" (click)="goPrevious()">{{number}}</a></li>-->
<!--      <li class="page-item active">-->
<!--        <a class="page-link" href="#"> <span class="sr-only">{{number + 1}}</span></a>-->
<!--      </li>-->
<!--      <li class="page-item" *ngIf="checkNext"><a class="page-link" (click)="goNext()">{{number + 2}}</a></li>-->
<!--      <li class="page-item" *ngIf="checkNext">-->
<!--        <a class="page-link" (click)="goNext()">Trang kế</a>-->
<!--      </li>-->
<!--    </ul>-->
<!--  </div>-->
<!--</div>-->

  <div class="py-3">
    <nav aria-label="Page navigation example d-flex flex-row-reverse">
      <ul class="pagination justify-content-end">
        <div *ngIf="number == 0">
          <li class="page-item disabled">
            <button class="page-link" (click)="goStart()" hidden><<</button>
          </li>
        </div>
        <div *ngIf="number != 0">
          <li class="page-item">
            <button class="page-link" (click)="goStart()"><<</button>
          </li>
        </div>
        <div *ngIf="number == 0">
          <li class="page-item disabled">
            <button class="page-link" (click)="goPrevious()" hidden><</button>
          </li>
        </div>
        <div *ngIf="number != 0">
          <li class="page-item">
            <button class="page-link" (click)="goPrevious()">Privious</button>
          </li>
        </div>

        <div class="number-pages">{{number + 1}} | {{totalPages}}</div>
        <div *ngIf="number == totalPages - 1">
          <li class="page-item disabled">
            <button class="page-link" (click)="goNext()" hidden>></button>
          </li>
        </div>
        <div *ngIf="number != totalPages - 1">
          <li class="page-item">
            <button class="page-link" (click)="goNext()">Next</button>
          </li>
        </div>
        <div *ngIf="number == totalPages - 1">
          <li class="page-item disabled">
            <button class="page-link" (click)="goEnd()" hidden>>></button>
          </li>
        </div>
        <div *ngIf="number != totalPages - 1">
          <li class="page-item">
            <button class="page-link" (click)="goEnd()">>></button>
          </li>
        </div>
      </ul>
    </nav>
  </div>
</div>

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Bạn có muốn xóa các mục sau</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <table>
          <tr *ngFor="let item of nameDelete;let i = index ">
            <td>{{i + 1}}.{{item}}</td>
          </tr>
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="resetDelete()">Hủy</button>
        <button type="button" class="btn btn-danger" (click)="deleteId()" data-bs-dismiss="modal">Xóa</button>
      </div>
    </div>
  </div>
</div>

<div style="text-align: center; display: flex; justify-content: center">
  <ng-template #elseBlock>
    <div style="color: red;" class="col-12">
      <h3>Không có dữ liệu !!!</h3>
    </div>
  </ng-template>
</div>

